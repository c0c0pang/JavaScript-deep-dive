# 생성자 함수에 의한 객체 생성

## 생성자 함수

    new 연사자와 함께 호출하여 객체(인스턴스)를 생성하는 함수이다.
    여기서 생성자 함수에 의해 생성된 객체를 인스턴스라 한다.

    객체 생성 방식에는 두가지가 있다.

    1. 객체 리터럴에 의한 객체 생성
    2. 생성자 함수에 의한 객체 생성

### 객체 리터럴에 의한 객체 생성

    이 방식에는 문제점이있다.
    그것은 단 하나의 객체만 생성한다.
    동일한 프로퍼티를 갖는 객체를 여러 개 생성해야 하는 경우 매번 같은 프로퍼티를 기술해야한다.

```javascript
const circle1 = {
  radius: 5,
  getDiameter() {
    return 2 * this.radius;
  },
};
console.log(circle1.getDiameter());
const circle2 = {
  radius: 5,
  getDiameter() {
    return 2 * this.radius;
  },
};
console.log(circle2.getDiameter());
```

### 생성자 함수에 의한 객체 생성

    객체를 생성하기 의한 템플릿(클래스)처럼 생성자 함수를 사용하여 프로퍼티 구조가 동일한 객체 여러 개를 간편하게 생성가능하다.
    여기서 중요한 점은 new 연산자를 쓰지 않으면 일반 함수로 호출되니 이점을 유의해야한다.

```javascript
function Circle(radius) {
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
}
const circle1 = new Circle(2);
const circle2 = new Circle(5);
//4
console.log(circle1.getDiameter());
//10
console.log(circle2.getDiameter());
```

### 생성자 함수의 인스턴스 생성 과정

    아래와 같은 순서로 이루어져 있다.
    1. 인스턴스 생성과 this 바인딩
    2. 인스턴스 초기화
    3. 인스턴스 반환

#### 인스턴스 생성과 this 바인딩

    이 과정에서 암묵적으로 빈 객체가 생성된다.
    이 빈 객체가 생성자 함수가 생성한 인스턴스이다.
    그리고 이 생성된 인스턴스는 this에 바인딩된다.

```javascript
    function Circle(radius){
        //1. 암묵적으로 빈 객체가 this에 바인딩된다.
        console.log(this) // Circle {}

        ...
    }
```

#### 인스턴스 초기화

    this에 바인딩 되어있는 인스턴스를 초기화한다.
    즉 this에 바인딩되어 있는 프로퍼티나 메서드를 추가하고 생성자 함사가 인수로 전달받은 초기값을 인스턴스 프로퍼티에 할당하여 초기화하거나 고정값을 할당한다.
    이 작업은 개발자가 기술한다.

```javascript
function Circle(radius) {
  //1. 암묵적으로 빈 객체가 this에 바인딩된다.
  console.log(this); // Circle {}
  //2. this에 바인딩되어 있는 인스턴스를 초기화한다.
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
}
```

#### 인스턴스 반환

    생성자 함수 내부의 모든 처리가 끝나면 바인딩된 this가 암묵적으로 반환된다.
    한가지 주의할점은 명시적으로 객체를 반환하면 암묵적인 this 반환이 무시되며 명시적 원시값 반환은 무시된다.

```javascript
function Circle(radius) {
  //1. 암묵적으로 빈 객체가 this에 바인딩된다.
  console.log(this); // Circle {}
  //2. this에 바인딩되어 있는 인스턴스를 초기화한다.
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
  //3. 모든 처리가 끝나면 바인딩된 this가 암묵적으로 반환된다.
}
// 인스턴스 생성 및 Circle 함수는 this를 암묵적으로 반환한다.
const circle = new Circle(3);
console.log(circle); // Circle {radius:1, getDiameter: f}
```

#### 내부 메서드 [[Call]]과 [[Construct]]

    함수가 일반 함수로서 호출되면 함수 객체의 내부 메서드 [[Call]]이 호출된다.
    new 연산자와 함께 생성자 함수로서 호출되면 내부 메서드 [[Construct]]가 호출된다.
    여기서 호출 가능한 객체는 모두 함수 객체이므로 [[Call]]을 갖지만 [[Construct]]를 안갖는 경우가 있다. 이경우에는 non-construct이다.

#### construct 와 non-construct의 구분

    construct: 함수 선언문, 함수 표현식, 클래스
    non-construct: 메서드(ES6 메서드 축약형), 화살표 함수
